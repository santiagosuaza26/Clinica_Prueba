<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clinic IPS - Enfermera</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Clinic IPS - Panel Enfermera</h1>
            <p>Bienvenido, <span id="username"></span></p>
            <button class="logout-btn" onclick="logout()">Cerrar Sesi贸n</button>
        </header>
        <div class="tab">
             <button class="tablinks active" onclick="openTab(event, 'appointments')">Citas</button>
             <button class="tablinks" onclick="openTab(event, 'patients')">Pacientes</button>
             <button class="tablinks" onclick="openTab(event, 'vitals')"> Signos Vitales</button>
             <button class="tablinks" onclick="openTab(event, 'medications')"> Medicamentos Administrados</button>
             <button class="tablinks" onclick="openTab(event, 'procedures')">И Procedimientos Realizados</button>
             <button class="tablinks" onclick="openTab(event, 'observations')"> Observaciones</button>
         </div>

        <div id="appointments" class="tabcontent" style="display: block;">
            <button class="accordion">Ver Citas</button>
            <div class="panel">
                <button class="btn-secondary" onclick="loadAppointments()">Cargar Citas</button>
                <div id="appointmentsList"></div>
            </div>
        </div>

        <div id="patients" class="tabcontent">
            <button class="accordion">Ver Pacientes</button>
            <div class="panel">
                <button class="btn-secondary" onclick="loadPatients()">Cargar Pacientes</button>
                <div id="patientsList"></div>
            </div>
        </div>

        <div id="vitals" class="tabcontent">
            <button class="accordion">Registrar Signos Vitales</button>
            <div class="panel">
                <form id="vitalsForm">
                    <div class="form-group">
                        <label for="vitalsPatientCedula">C茅dula del Paciente:</label>
                        <input type="text" id="vitalsPatientCedula" required>
                    </div>
                    <div class="form-group">
                        <label for="bloodPressure">Presi贸n Arterial:</label>
                        <input type="text" id="bloodPressure" required>
                    </div>
                    <div class="form-group">
                        <label for="temperature">Temperatura:</label>
                        <input type="number" id="temperature" step="0.1" required>
                    </div>
                    <div class="form-group">
                        <label for="pulse">Pulso:</label>
                        <input type="number" id="pulse" required>
                    </div>
                    <div class="form-group">
                        <label for="oxygenLevel">Nivel de Ox铆geno:</label>
                        <input type="number" id="oxygenLevel" required>
                    </div>
                    <button type="submit" class="btn-primary">Registrar</button>
                </form>
            </div>
        </div>

        <div id="procedures" class="tabcontent">
            <button class="accordion">И Procedimientos Realizados</button>
            <div class="panel">
                <div class="search-container">
                    <input type="text" id="patientSearch" placeholder="Buscar paciente por c茅dula..." onkeyup="searchPatient()">
                    <button class="btn-secondary" onclick="loadPatientInfo()">Buscar</button>
                </div>
                <div id="patientInfo"></div>
                <form id="proceduresForm">
                    <div class="form-group">
                        <label for="procPatientCedula">C茅dula del Paciente:</label>
                        <input type="text" id="procPatientCedula" required readonly>
                    </div>
                    <div class="form-group">
                        <label for="procOrderNumber">N煤mero de Orden M茅dica:</label>
                        <input type="text" id="procOrderNumber" required>
                    </div>
                    <div class="form-group">
                        <label for="procedureName">Nombre del Procedimiento:</label>
                        <select id="procedureName" required>
                            <option value="">Seleccionar procedimiento...</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="procObservations">Observaciones:</label>
                        <textarea id="procObservations" rows="3"></textarea>
                    </div>
                    <button type="submit" class="btn-primary">Registrar Procedimiento</button>
                </form>
                <div class="list-section">
                    <h3>Procedimientos Realizados</h3>
                    <div id="proceduresList"></div>
                </div>
            </div>
        </div>

        <div id="medications" class="tabcontent">
            <button class="accordion"> Medicamentos Administrados</button>
            <div class="panel">
                <div class="search-container">
                    <input type="text" id="medPatientSearch" placeholder="Buscar paciente por c茅dula..." onkeyup="searchPatientForMeds()">
                    <button class="btn-secondary" onclick="loadPatientInfoForMeds()">Buscar</button>
                </div>
                <div id="medPatientInfo"></div>
                <form id="medicationsForm">
                    <div class="form-group">
                        <label for="medPatientCedula">C茅dula del Paciente:</label>
                        <input type="text" id="medPatientCedula" required readonly>
                    </div>
                    <div class="form-group">
                        <label for="medOrderNumber">N煤mero de Orden M茅dica:</label>
                        <input type="text" id="medOrderNumber" required>
                    </div>
                    <div class="form-group">
                        <label for="medicationName">Medicamento:</label>
                        <select id="medicationName" required>
                            <option value="">Seleccionar medicamento...</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="medicationDose">Dosis Administrada:</label>
                        <input type="text" id="medicationDose" required placeholder="ej: 500mg">
                    </div>
                    <div class="form-group">
                        <label for="medicationTime">Hora de Administraci贸n:</label>
                        <input type="time" id="medicationTime" required>
                    </div>
                    <div class="form-group">
                        <label for="medObservations">Observaciones:</label>
                        <textarea id="medObservations" rows="3"></textarea>
                    </div>
                    <button type="submit" class="btn-primary">Registrar Administraci贸n</button>
                </form>
                <div class="list-section">
                    <h3>Medicamentos Administrados</h3>
                    <div id="medicationsList"></div>
                </div>
            </div>
        </div>

        <div id="observations" class="tabcontent">
            <button class="accordion"> Observaciones</button>
            <div class="panel">
                <div class="search-container">
                    <input type="text" id="obsPatientSearch" placeholder="Buscar paciente por c茅dula..." onkeyup="searchPatientForObs()">
                    <button class="btn-secondary" onclick="loadPatientInfoForObs()">Buscar</button>
                </div>
                <div id="obsPatientInfo"></div>
                <form id="observationsForm">
                    <div class="form-group">
                        <label for="obsPatientCedula">C茅dula del Paciente:</label>
                        <input type="text" id="obsPatientCedula" required readonly>
                    </div>
                    <div class="form-group">
                        <label for="obsOrderNumber">N煤mero de Orden M茅dica:</label>
                        <input type="text" id="obsOrderNumber" required>
                    </div>
                    <div class="form-group">
                        <label for="observationType">Tipo de Observaci贸n:</label>
                        <select id="observationType" required>
                            <option value="">Seleccionar tipo...</option>
                            <option value="general">General</option>
                            <option value="post-procedure">Post-Procedimiento</option>
                            <option value="medication-reaction">Reacci贸n a Medicamento</option>
                            <option value="vital-signs">Signos Vitales</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="obsDescription">Descripci贸n:</label>
                        <textarea id="obsDescription" rows="4" required placeholder="Describa la observaci贸n detalladamente..."></textarea>
                    </div>
                    <div class="form-group">
                        <label for="obsSeverity">Severidad:</label>
                        <select id="obsSeverity" required>
                            <option value="">Seleccionar severidad...</option>
                            <option value="low">Baja</option>
                            <option value="medium">Media</option>
                            <option value="high">Alta</option>
                            <option value="critical">Cr铆tica</option>
                        </select>
                    </div>
                    <button type="submit" class="btn-primary">Guardar Observaci贸n</button>
                </form>
                <div class="list-section">
                    <h3>Observaciones Registradas</h3>
                    <div id="observationsList"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="action-buttons">
        <button class="btn-success" onclick="registerVisit()"> Registrar Visita Completa</button>
    </div>
    <script src="config.js"></script>
    <script src="api.js"></script>
    <script src="nurse.js"></script>
</body>
</html>